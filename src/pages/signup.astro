---
import Header from '../components/layout/Header.astro'
import Layout from '../layouts/Layout.astro'
import Sidebar from '../layouts/Sidebar.astro'
import CTA from '../sections/CTA.astro'
import Footer from '../components/layout/Footer.astro'

const userIsLoggedIn = !!Astro.locals.userId;
---

<Layout title="Gitset - Advanced AI-Driven GitHub Tools Suite.">
    <Sidebar />
    <div class="flex flex-col min-h-screen">
      <div class="hidden lg:block fixed w-64 h-full">
        <Sidebar />
      </div>
      
      <div class="flex-1 lg:ml-64 flex flex-col">
        <Header />
        <main class="flex-1 overflow-x-hidden overflow-y-auto bg-gray-50">
          <div class="container mx-auto px-4 sm:px-6 lg:px-8 py-8 mt-16  top">
            <br />
            <div class="flex justify-center"></div>
            <CTA
              align="center"
              title={`<span id="cta-title">Access to <strong>Gitset</strong></span>`}
              description={`
                <span id="cta-description">
                  This platform uses GitHub OAuth for secure access. <span class="font-semibold">Authentication is required to enable certain workspace features</span>. You can revoke access at any time.
                </span>
              `}
            >
                <div class="flex justify-center button-wrapper">
                  <div class="gradient-border flex flex-col md:flex-row justify-center gap-4 mt-7">
                      <a href="/" class="w-full md:w-auto order-first md:order-none">
                          <button
                              class="w-full dark:text-neutral-700 text-sm text-neutral-200 dark:bg-neutral-200 bg-neutral-700 py-2 md:py-4 px-6 rounded-[10px] transition-all duration-300 hover:text-[rgb(91,207,218)] dark:hover:text-[rgb(91,207,218)] cursor-pointer whitespace-nowrap flex items-center justify-center"
                          >
                              Back
                          </button>
                      </a>
                      <button style="border-radius: 10px;" class="order-last md:order-none w-full text-neutral-700 text-sm dark:text-neutral-200 bg-neutral-200 hover:shadow-[0_0_0_3px_rgb(91,207,218)] dark:bg-neutral-700  font-semibold py-3 px-6 rounded shadow-sm hover:bg-gray-700 transition duration-300 group">
                        <a href="/api/auth/github" id="github-link" class="flex items-center justify-center transition-all duration-300 group-hover:text-[rgb(91,207,218)]">
                            <svg class="h-5 w-6 mr-2 transition-all duration-300 group-hover:text-[rgb(91,207,218)]" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                <path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12" fill="currentColor"/>
                            </svg>
                            <span id="btn-text">Sign up with GitHub</span>
                        </a>
                     </button>
                  </div>
              </div>

                <div class="flex justify-center mt-12">
                  <p class="text-center mt-4 text-sm text-neutral-700">
                    By signing up, you agree to our <a href="/terms" class="hover:text-[rgb(91,207,218)] font-medium">Terms of Service</a> and <a href="/privacy" class="hover:text-[rgb(91,207,218)] font-medium">Privacy Policy</a>.
                  </p>
                </div>
                <div class="flex justify-center bottom-4 relative">
                  <p class="text-center mt-4 text-sm text-neutral-7000">
                    If you have any questions or concerns about how these tools function, please visit our <a href="/faq" class="hover:text-[rgb(91,207,218)] font-medium">FAQ section</a> or <a href="/contact" class="hover:text-[rgb(91,207,218)] font-medium">contact us</a> for assistance.
                  </p>
                </div>
                </div>
            </CTA>
            </main>
            <Footer />
          </div>
        </div>
    </div>
</Layout>


<script>
  document.getElementById('github-link')?.addEventListener('click', (e) => {
      e.preventDefault();
      const btnText = document.getElementById('btn-text');
      if (btnText) {
          btnText.textContent = 'Signing up...';
          setTimeout(() => {
              window.location.href = '/api/auth/github';
          }, 500);
      }
  });
</script>

<style>
    .main-container {
        min-height: 100vh;
        display: flex;
        margin-top: 6rem;
        flex-direction: column;
        justify-content: space-between;
    }

    @media (max-width: 1023px) {
        .container {
            max-width: 100% !important;
            padding-left: 1rem !important;
            padding-right: 1rem !important;
        }
    }
    
    h3 {
        margin-bottom: 1.5rem;
        font-size: 1.25rem;
        font-weight: 600;
        white-space: nowrap;
    }

    p {
        margin-top: 0.5rem;
        margin-bottom: 1.5rem;
        line-height: 1.6;
    }

    @media (max-width: 1023px) {
        h3 {
            font-size: 1.125rem;
        }

        p {
            font-size: 1rem;
        }
    }


    .custom-button {
        background-color: #3a9fa8;
        border-color: #fff;
    }

    .cta-button {
        background-color: #59b4aa;
    }
</style>